<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ù†Ù‡Ø§ÛŒÛŒ - Ù…Ø¯ÛŒØ±ÛŒØª Ø¯ÙÙ†Ú¯</title>

  <!-- Tailwind optional (keeps layout easy) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- jsPDF + html2canvas for PDF export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <link href="style.css" rel="stylesheet">
  <style>
    /* extra layout using CSS grid */
    .container { max-width:1200px; margin:20px auto; padding:12px; display:grid; grid-template-columns: 1fr 360px; gap:18px; }
    .left-col { display:grid; gap:18px; grid-auto-rows:min-content; }
    .right-col { display:grid; gap:18px; grid-auto-rows:min-content; }
    @media (max-width:900px) { .container{ grid-template-columns: 1fr; } }
    .top-widgets { display:flex; gap:14px; }
    .widget { flex:1; padding:12px; border-radius:12px; }
  </style>
</head>
<body>
  <header class="header container">
    <div class="left row">
      <h1 style="font-size:20px;color:#ff9db3;font-weight:800">âœ¨ Ù…Ø¯ÛŒØ±ÛŒØª Ø¯ÙÙ†Ú¯</h1>
      <div class="small">Ù†Ø³Ø®Ù‡Ù” Ù†Ù‡Ø§ÛŒÛŒ MVP</div>
    </div>
    <div class="row">
      <button id="exportPdf" class="primary" title="Ø®Ø±ÙˆØ¬ÛŒ PDF">ğŸ“„ Ø®Ø±ÙˆØ¬ÛŒ PDF</button>
      <button id="logoutBtn" class="badge">Ø®Ø±ÙˆØ¬</button>
    </div>
  </header>

  <main class="container">
    <!-- LEFT (main) -->
    <div class="left-col">
      <!-- Widgets -->
      <div class="glass top-widgets">
        <div class="widget glass">
          <div class="small">ğŸ’¸ Ù…Ø¬Ù…ÙˆØ¹ Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§</div>
          <div style="font-size:18px;font-weight:800;color:#ffb6c1" id="totalExpenses">0 ØªÙˆÙ…Ø§Ù†</div>
        </div>
        <div class="widget glass">
          <div class="small">ğŸ‘¥ ØªØ¹Ø¯Ø§Ø¯ Ø§Ø¹Ø¶Ø§</div>
          <div style="font-size:18px;font-weight:800;color:#c0c0c8" id="membersCount">0</div>
        </div>
        <div class="widget glass">
          <div class="small">ğŸ—“ Ø§ÛŒÙ† Ù…Ø§Ù‡</div>
          <div style="font-size:18px;font-weight:800;color:#ffd4da" id="monthExpenses">0 ØªÙˆÙ…Ø§Ù†</div>
        </div>
      </div>

      <!-- Goal progress -->
      <div class="glass p-4">
        <div class="row" style="justify-content:space-between">
          <div><strong>Ù‡Ø¯Ù Ù…Ø§Ù‡Ø§Ù†Ù‡</strong></div>
          <div class="small" id="goalLabel">Ù‡Ø¯Ù: 5,000,000 ØªÙˆÙ…Ø§Ù†</div>
        </div>
        <div class="progress mt-3"><div id="progressBar" style="width:0%"></div></div>
        <div class="small mt-2" id="progressText">Û°%</div>
      </div>

      <!-- Filters + table -->
      <div class="glass p-4">
        <div class="row" style="justify-content:space-between;margin-bottom:10px">
          <div class="row">
            <input id="filterText" placeholder="Ø¬Ø³ØªØ¬Ùˆ Ø¯Ø± Ø¯Ø³ØªÙ‡/ØªÙˆØ¶ÛŒØ­" class="p-2 rounded bg-gray-900 text-white" />
            <input id="fromDate" type="date" class="p-2 rounded bg-gray-900 text-white" />
            <input id="toDate" type="date" class="p-2 rounded bg-gray-900 text-white" />
            <button id="applyFilters" class="ghost">ÙÛŒÙ„ØªØ±</button>
            <button id="clearFilters" class="ghost">Ø¨Ø§Ø²Ù†Ø´Ø§Ù†ÛŒ</button>
          </div>
          <div>
            <button id="openModal" class="primary">â• Ø§ÙØ²ÙˆØ¯Ù† Ù‡Ø²ÛŒÙ†Ù‡</button>
          </div>
        </div>

        <div style="overflow:auto">
          <table id="expenseTable" class="w-full text-sm">
            <thead><tr><th>Ø¯Ø³ØªÙ‡</th><th>Ù…Ø¨Ù„Øº</th><th>ØªÙˆØ¶ÛŒØ­</th><th>ØªØ§Ø±ÛŒØ®</th><th>Ø§Ù‚Ø¯Ø§Ù…</th></tr></thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

    </div>

    <!-- RIGHT (charts / settlement / groups) -->
    <div class="right-col">
      <div class="glass p-4">
        <h3 class="small">Ù†Ù…ÙˆØ¯Ø§Ø± Ù‡Ø²ÛŒÙ†Ù‡â€ŒÙ‡Ø§</h3>
        <canvas id="expenseChart" height="260"></canvas>
      </div>

      <div class="glass p-4">
        <h3 class="small">ØªØ³ÙˆÛŒÙ‡ Ù‡ÙˆØ´Ù…Ù†Ø¯</h3>
        <div class="row" style="margin-top:8px">
          <select id="settleGroup" class="p-2 rounded bg-gray-900"></select>
          <button id="calcSettleBtn" class="ghost">Ù…Ø­Ø§Ø³Ø¨Ù‡</button>
        </div>
        <div id="settleResult" class="small mt-3"></div>
      </div>

      <div class="glass p-4">
        <h3 class="small">Ú¯Ø±ÙˆÙ‡â€ŒÙ‡Ø§</h3>
        <div id="groupList" class="small mt-2"></div>
        <div class="mt-3">
          <input id="newGroupName" placeholder="Ù†Ø§Ù… Ú¯Ø±ÙˆÙ‡ Ø¬Ø¯ÛŒØ¯" class="p-2 rounded bg-gray-900 w-full" />
          <input id="newGroupDesc" placeholder="ØªÙˆØ¶ÛŒØ­ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)" class="p-2 rounded bg-gray-900 w-full mt-2" />
          <button id="createGroupBtn" class="primary mt-3 w-full">Ø³Ø§Ø®Øª Ú¯Ø±ÙˆÙ‡</button>
        </div>
      </div>
    </div>
  </main>

  <footer class="footer">âœ¦ Ø·Ø±Ø§Ø­ÛŒ Ø±Ø²Ú¯Ù„Ø¯ Ùˆ Ù…Ø´Ú©ÛŒ â€” Ù†Ø³Ø®Ù‡Ù” Ù†Ù‡Ø§ÛŒÛŒ MVP</footer>

  <!-- Modal -->
  <div id="expenseModal" class="modal">
    <div class="modal box">
      <h3 style="color:#ff9db3;margin-bottom:8px">â• Ø§ÙØ²ÙˆØ¯Ù† Ù‡Ø²ÛŒÙ†Ù‡</h3>
      <form id="expenseForm" class="row" style="flex-direction:column;gap:8px">
        <input id="category" placeholder="Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ (Ù…Ø«Ù„Ø§Ù‹ ØºØ°Ø§)" class="p-2 rounded bg-gray-900 w-full" />
        <input id="amount" placeholder="Ù…Ø¨Ù„Øº (ØªÙˆÙ…Ø§Ù†)" type="number" class="p-2 rounded bg-gray-900 w-full" />
        <input id="note" placeholder="ØªÙˆØ¶ÛŒØ­ (Ø§Ø®ØªÛŒØ§Ø±ÛŒ)" class="p-2 rounded bg-gray-900 w-full" />
        <select id="modalGroup" class="p-2 rounded bg-gray-900 w-full"></select>
        <select id="modalMember" class="p-2 rounded bg-gray-900 w-full"></select>
        <div class="row" style="justify-content:space-between">
          <button type="submit" class="primary">Ø«Ø¨Øª</button>
          <button type="button" id="closeModal" class="ghost">Ø§Ù†ØµØ±Ø§Ù</button>
        </div>
      </form>
    </div>
  </div>

  <script src="dashboard.js"></script>
</body>
</html>
